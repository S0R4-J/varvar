<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dungeon & Stone Wiki</title>
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- –ò–∫–æ–Ω–∫–∏ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- –§–æ–Ω —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
    <div id="petals-container"></div>

    <!-- –•–µ–¥–µ—Ä -->
    <header class="wiki-header">
        <div class="logo-area">
            <div class="logo-icon">üõ°Ô∏è</div>
            <span class="logo-text">D&S <span class="highlight">Wiki</span></span>
        </div>

        <!-- –ü–æ–∏—Å–∫ -->
        <div class="search-container">
            <i class="fa-solid fa-search search-icon"></i>
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ (–ø–µ—Ä—Å–æ–Ω–∞–∂–∏, –ø—Ä–µ–¥–º–µ—Ç—ã...)" oninput="app.search()">
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
        <div class="controls">
            <button class="theme-btn" onclick="app.toggleTheme()" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
                <i class="fa-solid fa-moon"></i>
            </button>
            <button class="add-btn" onclick="app.openAddModal()">
                <i class="fa-solid fa-plus"></i> <span>–î–æ–±–∞–≤–∏—Ç—å</span>
            </button>
            <button class="reset-btn" onclick="app.resetDB()" title="–°–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö">
                <i class="fa-solid fa-rotate-right"></i>
            </button>
        </div>
    </header>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <nav class="filter-nav">
        <button class="filter-btn active" onclick="app.filter('all')">–í—Å–µ</button>
        <button class="filter-btn" onclick="app.filter('character')">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</button>
        <button class="filter-btn" onclick="app.filter('monster')">–ú–æ–Ω—Å—Ç—Ä—ã</button>
        <button class="filter-btn" onclick="app.filter('item')">–ü—Ä–µ–¥–º–µ—Ç—ã</button>
        <button class="filter-btn" onclick="app.filter('essence')">–≠—Å—Å–µ–Ω—Ü–∏–∏</button>
    </nav>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <div id="stats-bar" class="stats-bar">
            <!-- –°—é–¥–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ JS -->
        </div>

        <div id="card-grid" class="grid-container">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JS -->
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (–ü—Ä–æ—Å–º–æ—Ç—Ä/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) -->
    <div id="modal-overlay" class="modal-overlay" onclick="app.closeModal()">
        <div class="modal-card" onclick="event.stopPropagation()">
            <button class="close-modal" onclick="app.closeModal()">&times;</button>
            
            <div class="modal-top">
                <!-- –§–æ—Ç–æ -->
                <div class="modal-img-wrapper">
                    <img id="m-img" src="" alt="Avatar">
                    <div class="edit-overlay" onclick="document.getElementById('m-img-input').focus()">
                        <i class="fa-solid fa-camera"></i>
                    </div>
                </div>
                
                <!-- –ó–∞–≥–æ–ª–æ–≤–∫–∏ -->
                <div class="modal-header-inputs">
                    <input type="text" id="m-img-input" class="edit-input hidden" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...">
                    <h2 id="m-name" contenteditable="false">–ò–º—è</h2>
                    <p id="m-subtitle" contenteditable="false">–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫</p>
                    <div class="tags">
                        <span class="tag status-tag" id="m-status" contenteditable="false">–°—Ç–∞—Ç—É—Å</span>
                    </div>
                </div>
            </div>

            <div class="modal-body">
                <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                <div class="section">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <div id="m-desc" class="editable-area" contenteditable="false"></div>
                </div>
                
                <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
                <div class="section">
                    <label>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ <span class="blue-emoji">üìä</span></label>
                    <div id="m-details" class="details-grid">
                        <!-- –î–µ—Ç–∞–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JS -->
                    </div>
                    <button id="add-detail-btn" class="small-btn hidden" onclick="app.addDetailField()">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ</button>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="modal-footer">
                <button id="btn-edit" class="action-btn primary" onclick="app.toggleEditMode()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <button id="btn-save" class="action-btn success hidden" onclick="app.saveEntry()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button id="btn-delete" class="action-btn danger hidden" onclick="app.deleteEntry()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="js/database.js"></script>
    <script src="js/app.js"></script>
</body>
</html>